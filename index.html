<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì² ê°• ì œì„  ê³µì • ì§€ì‹ ê·¸ë˜í”„</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            padding: 20px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .controls {
            padding: 20px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .control-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .control-group label {
            font-weight: 600;
            color: #495057;
        }
        
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #667eea 0%, #764ba2 100%);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        select {
            padding: 8px 12px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            background: white;
            font-size: 14px;
        }
        
        .graph-container {
            position: relative;
            height: 700px;
            background: #ffffff;
        }
        
        #cy {
            width: 100%;
            height: 100%;
        }
        
        .info-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            max-width: 300px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .info-panel h3 {
            margin: 0 0 10px 0;
            color: #495057;
            font-size: 1.2em;
        }
        
        .info-panel p {
            margin: 5px 0;
            color: #6c757d;
            font-size: 0.9em;
        }
        
        .legend {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 5px 0;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #333;
        }
        
        .stats {
            padding: 20px;
            background: #f8f9fa;
            border-top: 2px solid #e9ecef;
            display: flex;
            justify-content: space-around;
            text-align: center;
        }
        
        .stat-item {
            flex: 1;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #495057;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ­ ì² ê°• ì œì„  ê³µì • ì§€ì‹ ê·¸ë˜í”„</h1>
            <p>ê³ ë¡œ(Blast Furnace) ì œì„  ê³µì •ì˜ í•µì‹¬ ìš”ì†Œë“¤ê³¼ ê´€ê³„ë¥¼ ì‹œê°í™”</p>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>ë ˆì´ì•„ì›ƒ:</label>
                <select id="layoutSelect">
                    <option value="cose">COSE (ê¸°ë³¸)</option>
                    <option value="circle">ì›í˜•</option>
                    <option value="grid">ê²©ì</option>
                    <option value="concentric">ë™ì‹¬ì›</option>
                    <option value="breadthfirst">ê³„ì¸µí˜•</option>
                </select>
            </div>
            <button onclick="resetLayout()">ë ˆì´ì•„ì›ƒ ì¬ì„¤ì •</button>
            <button onclick="fitToView()">ì „ì²´ ë³´ê¸°</button>
            <button onclick="exportGraph()">ê·¸ë˜í”„ ë‚´ë³´ë‚´ê¸°</button>
        </div>
        
        <div class="graph-container">
            <div id="cy"></div>
            
            <div class="info-panel" id="infoPanel">
                <h3>ì •ë³´ íŒ¨ë„</h3>
                <p>ë…¸ë“œë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
            </div>
            
            <div class="legend">
                <h4>ë²”ë¡€</h4>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #FF6B6B;"></div>
                    <span>ì›ë£Œ (Raw Materials)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #4ECDC4;"></div>
                    <span>ê³µì • (Process)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #45B7D1;"></div>
                    <span>ì¥ë¹„ (Equipment)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #FFA07A;"></div>
                    <span>ì œí’ˆ (Product)</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #98D8C8;"></div>
                    <span>ë¶€ì‚°ë¬¼ (By-product)</span>
                </div>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-value" id="nodeCount">0</div>
                <div class="stat-label">ë…¸ë“œ ìˆ˜</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="edgeCount">0</div>
                <div class="stat-label">ì—°ê²° ìˆ˜</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="processCount">0</div>
                <div class="stat-label">ê³µì • ìˆ˜</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="materialCount">0</div>
                <div class="stat-label">ì›ë£Œ ìˆ˜</div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cytoscape/3.23.0/cytoscape.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script>
        // ì œì„  ê³µì • ì§€ì‹ ê·¸ë˜í”„ ë°ì´í„°
        const graphData = {
            nodes: [
                // ì›ë£Œ (Raw Materials)
                { id: 'iron_ore', label: 'ì² ê´‘ì„\n(Iron Ore)', type: 'raw_material', 
                  description: 'ì² ì„ í•¨ìœ í•œ ê´‘ë¬¼. ì£¼ë¡œ ì ì² ê´‘(Fe2O3), ìì² ê´‘(Fe3O4) ë“±ì´ ì‚¬ìš©ë¨',
                  composition: 'Fe: 55-65%', temperature: 'ìƒì˜¨' },
                { id: 'coke', label: 'ì½”í¬ìŠ¤\n(Coke)', type: 'raw_material',
                  description: 'ì„íƒ„ì„ ê³ ì˜¨ì—ì„œ ê±´ë¥˜í•˜ì—¬ ë§Œë“  ì—°ë£Œ. í™˜ì›ì œ ë° ì—´ì› ì—­í• ',
                  composition: 'íƒ„ì†Œ: 85-90%', temperature: '1000-1200Â°C' },
                { id: 'limestone', label: 'ì„íšŒì„\n(Limestone)', type: 'raw_material',
                  description: 'ìš©ì œë¡œ ì‚¬ìš©ë˜ì–´ ë¶ˆìˆœë¬¼ì„ ì œê±°í•˜ê³  ìŠ¬ë˜ê·¸ë¥¼ í˜•ì„±',
                  composition: 'CaCO3: 90-95%', temperature: '800-900Â°C' },
                { id: 'hot_air', label: 'ì—´í’\n(Hot Air)', type: 'raw_material',
                  description: 'ê³ ë¡œ í•˜ë¶€ì—ì„œ ê³µê¸‰ë˜ëŠ” ê°€ì—´ëœ ê³µê¸°. ì—°ì†Œë¥¼ ë•ëŠ” ì—­í• ',
                  composition: 'O2: 21%, N2: 78%', temperature: '1000-1200Â°C' },
                
                // ê³µì • (Process)
                { id: 'charging', label: 'ì¥ì…\n(Charging)', type: 'process',
                  description: 'ì›ë£Œë¥¼ ê³ ë¡œ ìƒë¶€ì— íˆ¬ì…í•˜ëŠ” ê³µì •',
                  location: 'ê³ ë¡œ ìƒë¶€', duration: 'ì—°ì†' },
                { id: 'reduction', label: 'í™˜ì›\n(Reduction)', type: 'process',
                  description: 'ì² ê´‘ì„ì˜ ì‚°í™”ì² ì´ ì¼ì‚°í™”íƒ„ì†Œì— ì˜í•´ í™˜ì›ë˜ëŠ” ê³µì •',
                  temperature: '800-1200Â°C', reaction: 'Fe2O3 + 3CO â†’ 2Fe + 3CO2' },
                { id: 'melting', label: 'ìš©ìœµ\n(Melting)', type: 'process',
                  description: 'í™˜ì›ëœ ì² ì´ ìš©ìœµë˜ì–´ ì„ ì² ì´ ë˜ëŠ” ê³µì •',
                  temperature: '1500-1600Â°C', location: 'ê³ ë¡œ í•˜ë¶€' },
                { id: 'slag_formation', label: 'ìŠ¬ë˜ê·¸ í˜•ì„±\n(Slag Formation)', type: 'process',
                  description: 'ë¶ˆìˆœë¬¼ê³¼ ìš©ì œê°€ ê²°í•©í•˜ì—¬ ìŠ¬ë˜ê·¸ë¥¼ í˜•ì„±í•˜ëŠ” ê³µì •',
                  temperature: '1400-1500Â°C', density: '2.5-3.0 g/cmÂ³' },
                { id: 'tapping', label: 'ì¶œì„ \n(Tapping)', type: 'process',
                  description: 'ìš©ìœµëœ ì„ ì² ê³¼ ìŠ¬ë˜ê·¸ë¥¼ ê³ ë¡œì—ì„œ ë°°ì¶œí•˜ëŠ” ê³µì •',
                  frequency: '4-6íšŒ/ì¼', duration: '30-60ë¶„' },
                
                // ì¥ë¹„ (Equipment)
                { id: 'blast_furnace', label: 'ê³ ë¡œ\n(Blast Furnace)', type: 'equipment',
                  description: 'ì² ê´‘ì„ì„ í™˜ì›í•˜ì—¬ ì„ ì² ì„ ìƒì‚°í•˜ëŠ” ì£¼ìš” ì„¤ë¹„',
                  height: '80-120m', capacity: '1000-5000mÂ³' },
                { id: 'hot_stove', label: 'ì—´í’ë¡œ\n(Hot Stove)', type: 'equipment',
                  description: 'ê³ ë¡œì— ê³µê¸‰í•  ì—´í’ì„ ìƒì„±í•˜ëŠ” ì„¤ë¹„',
                  temperature: '1000-1200Â°C', count: '3-4ê¸°' },
                { id: 'skip_hoist', label: 'ìŠ¤í‚µ í˜¸ì´ìŠ¤íŠ¸\n(Skip Hoist)', type: 'equipment',
                  description: 'ì›ë£Œë¥¼ ê³ ë¡œ ìƒë¶€ë¡œ ìš´ë°˜í•˜ëŠ” ì„¤ë¹„',
                  capacity: '20-40í†¤', speed: '3-5m/s' },
                { id: 'casthouse', label: 'ì¶œì„ ì¥\n(Casthouse)', type: 'equipment',
                  description: 'ìš©ìœµëœ ì„ ì² ê³¼ ìŠ¬ë˜ê·¸ë¥¼ ì²˜ë¦¬í•˜ëŠ” ì„¤ë¹„',
                  runner_length: '200-400m', ladle_capacity: '300-400í†¤' },
                
                // ì œí’ˆ (Product)
                { id: 'pig_iron', label: 'ì„ ì² \n(Pig Iron)', type: 'product',
                  description: 'ê³ ë¡œì—ì„œ ìƒì‚°ë˜ëŠ” 1ì°¨ ì²  ì œí’ˆ. ì œê°• ê³µì •ì˜ ì›ë£Œë¡œ ì‚¬ìš©',
                  composition: 'Fe: 93-95%, C: 3-5%', temperature: '1450-1500Â°C' },
                
                // ë¶€ì‚°ë¬¼ (By-product)
                { id: 'slag', label: 'ìŠ¬ë˜ê·¸\n(Slag)', type: 'byproduct',
                  description: 'ì œì„  ê³¼ì •ì—ì„œ ìƒì„±ë˜ëŠ” ë¶€ì‚°ë¬¼. ì‹œë©˜íŠ¸ ì›ë£Œë¡œ í™œìš©',
                  composition: 'CaO: 40-45%, SiO2: 30-35%', uses: 'ì‹œë©˜íŠ¸, ë„ë¡œì¬' },
                { id: 'blast_furnace_gas', label: 'ê³ ë¡œê°€ìŠ¤\n(BF Gas)', type: 'byproduct',
                  description: 'ê³ ë¡œì—ì„œ ë°œìƒí•˜ëŠ” ê°€ìŠ¤. ì—°ë£Œë¡œ ì¬í™œìš©',
                  composition: 'CO: 20-25%, CO2: 20-25%, N2: 50-55%', heating_value: '3400-3800 kJ/mÂ³' },
                { id: 'dust', label: 'ë”ìŠ¤íŠ¸\n(Dust)', type: 'byproduct',
                  description: 'ê³ ë¡œ ìš´ì˜ ì¤‘ ë°œìƒí•˜ëŠ” ë¶„ì§„',
                  composition: 'Fe: 40-50%, C: 20-30%', treatment: 'ì†Œê²° ê³µì • ì¬í™œìš©' }
            ],
            
            edges: [
                // ì›ë£Œ â†’ ê³µì •
                { source: 'iron_ore', target: 'charging', relationship: 'input_to' },
                { source: 'coke', target: 'charging', relationship: 'input_to' },
                { source: 'limestone', target: 'charging', relationship: 'input_to' },
                { source: 'hot_air', target: 'blast_furnace', relationship: 'supplied_to' },
                
                // ê³µì • â†’ ê³µì •
                { source: 'charging', target: 'reduction', relationship: 'leads_to' },
                { source: 'reduction', target: 'melting', relationship: 'leads_to' },
                { source: 'melting', target: 'slag_formation', relationship: 'concurrent_with' },
                { source: 'melting', target: 'tapping', relationship: 'leads_to' },
                { source: 'slag_formation', target: 'tapping', relationship: 'leads_to' },
                
                // ì¥ë¹„ â†’ ê³µì •
                { source: 'skip_hoist', target: 'charging', relationship: 'enables' },
                { source: 'blast_furnace', target: 'reduction', relationship: 'location_of' },
                { source: 'blast_furnace', target: 'melting', relationship: 'location_of' },
                { source: 'blast_furnace', target: 'slag_formation', relationship: 'location_of' },
                { source: 'hot_stove', target: 'hot_air', relationship: 'produces' },
                { source: 'casthouse', target: 'tapping', relationship: 'location_of' },
                
                // ê³µì • â†’ ì œí’ˆ/ë¶€ì‚°ë¬¼
                { source: 'tapping', target: 'pig_iron', relationship: 'produces' },
                { source: 'tapping', target: 'slag', relationship: 'produces' },
                { source: 'blast_furnace', target: 'blast_furnace_gas', relationship: 'produces' },
                { source: 'blast_furnace', target: 'dust', relationship: 'produces' },
                
                // ì¬í™œìš© ê´€ê³„
                { source: 'blast_furnace_gas', target: 'hot_stove', relationship: 'fuel_for' },
                { source: 'dust', target: 'charging', relationship: 'recycled_to' }
            ]
        };

        // ë…¸ë“œ íƒ€ì…ë³„ ìƒ‰ìƒ ë° ìŠ¤íƒ€ì¼ ì •ì˜
        const nodeStyles = {
            raw_material: { color: '#FF6B6B', shape: 'ellipse' },
            process: { color: '#4ECDC4', shape: 'rectangle' },
            equipment: { color: '#45B7D1', shape: 'diamond' },
            product: { color: '#FFA07A', shape: 'star' },
            byproduct: { color: '#98D8C8', shape: 'triangle' }
        };

        // Cytoscape ê·¸ë˜í”„ ì´ˆê¸°í™”
        let cy = cytoscape({
            container: document.getElementById('cy'),
            
            elements: [
                ...graphData.nodes.map(node => ({
                    data: { 
                        id: node.id, 
                        label: node.label,
                        type: node.type,
                        description: node.description,
                        ...node
                    }
                })),
                ...graphData.edges.map(edge => ({
                    data: { 
                        source: edge.source, 
                        target: edge.target,
                        relationship: edge.relationship
                    }
                }))
            ],
            
            style: [
                {
                    selector: 'node',
                    style: {
                        'background-color': function(ele) {
                            return nodeStyles[ele.data('type')].color;
                        },
                        'label': 'data(label)',
                        'text-valign': 'center',
                        'text-halign': 'center',
                        'color': '#fff',
                        'text-outline-width': 2,
                        'text-outline-color': '#333',
                        'font-size': '12px',
                        'font-weight': 'bold',
                        'width': 80,
                        'height': 80,
                        'shape': function(ele) {
                            return nodeStyles[ele.data('type')].shape;
                        },
                        'border-width': 3,
                        'border-color': '#333',
                        'text-wrap': 'wrap',
                        'text-max-width': '70px'
                    }
                },
                {
                    selector: 'edge',
                    style: {
                        'width': 3,
                        'line-color': '#666',
                        'target-arrow-color': '#666',
                        'target-arrow-shape': 'triangle',
                        'curve-style': 'bezier',
                        'arrow-scale': 1.2,
                        'label': 'data(relationship)',
                        'font-size': '10px',
                        'text-rotation': 'autorotate',
                        'text-margin-y': -10,
                        'color': '#444',
                        'text-background-color': '#fff',
                        'text-background-opacity': 0.8,
                        'text-background-padding': '2px'
                    }
                },
                {
                    selector: 'node:selected',
                    style: {
                        'border-width': 5,
                        'border-color': '#FFD700',
                        'background-color': '#FFD700'
                    }
                },
                {
                    selector: 'edge:selected',
                    style: {
                        'line-color': '#FFD700',
                        'target-arrow-color': '#FFD700',
                        'width': 5
                    }
                }
            ],
            
            layout: {
                name: 'cose',
                idealEdgeLength: 100,
                nodeOverlap: 20,
                refresh: 20,
                fit: true,
                padding: 30,
                randomize: false,
                componentSpacing: 100,
                nodeRepulsion: 400000,
                edgeElasticity: 100,
                nestingFactor: 5,
                gravity: 80,
                numIter: 1000,
                initialTemp: 200,
                coolingFactor: 0.95,
                minTemp: 1.0
            },
            
            zoomingEnabled: true,
            userZoomingEnabled: true,
            panningEnabled: true,
            userPanningEnabled: true,
            boxSelectionEnabled: true,
            selectionType: 'single',
            touchTapThreshold: 8,
            desktopTapThreshold: 4,
            autolock: false,
            autoungrabify: false,
            autounselectify: false
        });

        // ë…¸ë“œ í´ë¦­ ì´ë²¤íŠ¸
        cy.on('tap', 'node', function(evt) {
            const node = evt.target;
            const data = node.data();
            
            const infoPanel = document.getElementById('infoPanel');
            infoPanel.innerHTML = `
                <h3>${data.label}</h3>
                <p><strong>íƒ€ì…:</strong> ${getTypeLabel(data.type)}</p>
                <p><strong>ì„¤ëª…:</strong> ${data.description}</p>
                ${data.composition ? `<p><strong>êµ¬ì„±:</strong> ${data.composition}</p>` : ''}
                ${data.temperature ? `<p><strong>ì˜¨ë„:</strong> ${data.temperature}</p>` : ''}
                ${data.capacity ? `<p><strong>ìš©ëŸ‰:</strong> ${data.capacity}</p>` : ''}
                ${data.height ? `<p><strong>ë†’ì´:</strong> ${data.height}</p>` : ''}
                ${data.uses ? `<p><strong>ìš©ë„:</strong> ${data.uses}</p>` : ''}
                ${data.reaction ? `<p><strong>ë°˜ì‘:</strong> ${data.reaction}</p>` : ''}
            `;
            
            // ì—°ê²°ëœ ë…¸ë“œë“¤ ê°•ì¡°
            const connectedNodes = node.neighborhood().nodes();
            const connectedEdges = node.neighborhood().edges();
            
            cy.elements().removeClass('highlighted');
            node.addClass('highlighted');
            connectedNodes.addClass('highlighted');
            connectedEdges.addClass('highlighted');
        });

        // ë¹ˆ ê³µê°„ í´ë¦­ ì‹œ ì„ íƒ í•´ì œ
        cy.on('tap', function(evt) {
            if (evt.target === cy) {
                cy.elements().removeClass('highlighted');
                document.getElementById('infoPanel').innerHTML = `
                    <h3>ì •ë³´ íŒ¨ë„</h3>
                    <p>ë…¸ë“œë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤.</p>
                `;
            }
        });

        // íƒ€ì… ë¼ë²¨ ë³€í™˜ í•¨ìˆ˜
        function getTypeLabel(type) {
            const labels = {
                raw_material: 'ì›ë£Œ',
                process: 'ê³µì •',
                equipment: 'ì¥ë¹„',
                product: 'ì œí’ˆ',
                byproduct: 'ë¶€ì‚°ë¬¼'
            };
            return labels[type] || type;
        }

        // ë ˆì´ì•„ì›ƒ ë³€ê²½ í•¨ìˆ˜
        function changeLayout() {
            const selectedLayout = document.getElementById('layoutSelect').value;
            
            let layoutConfig = {
                name: selectedLayout,
                fit: true,
                padding: 30
            };
            
            if (selectedLayout === 'cose') {
                layoutConfig = {
                    ...layoutConfig,
                    idealEdgeLength: 100,
                    nodeOverlap: 20,
                    refresh: 20,
                    randomize: false,
                    componentSpacing: 100,
                    nodeRepulsion: 400000,
                    edgeElasticity: 100,
                    nestingFactor: 5,
                    gravity: 80,
                    numIter: 1000,
                    initialTemp: 200,
                    coolingFactor: 0.95,
                    minTemp: 1.0
                };
            } else if (selectedLayout === 'concentric') {
                layoutConfig.concentric = function(node) {
                    const type = node.data('type');
                    const typeOrder = {
                        raw_material: 3,
                        process: 2,
                        equipment: 1,
                        product: 0,
                        byproduct: 0
                    };
                    return typeOrder[type] || 0;
                };
            } else if (selectedLayout === 'breadthfirst') {
                layoutConfig.roots = '#iron_ore, #coke, #limestone';
                layoutConfig.directed = true;
            }
            
            cy.layout(layoutConfig).run();
        }

        // ì»¨íŠ¸ë¡¤ í•¨ìˆ˜ë“¤
        function resetLayout() {
            changeLayout();
        }

        function fitToView() {
            cy.fit();
        }

        function exportGraph() {
            const png64 = cy.png();
            const link = document.createElement('a');
            link.download = 'steel_blast_furnace_graph.png';
            link.href = png64;
            link.click();
        }

        // í†µê³„ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateStats() {
            const nodes = cy.nodes();
            const edges = cy.edges();
            
            document.getElementById('nodeCount').textContent = nodes.length;
            document.getElementById('edgeCount').textContent = edges.length;
            
            const processCounts = nodes.filter(node => node.data('type') === 'process').length;
            const materialCounts = nodes.filter(node => node.data('type') === 'raw_material').length;
            
            document.getElementById('processCount').textContent = processCounts;
            document.getElementById('materialCount').textContent = materialCounts;
        }

        // ê°•ì¡° ìŠ¤íƒ€ì¼ ì¶”ê°€
        cy.style().selector('.highlighted').style({
            'border-width': 5,
            'border-color': '#FFD700',
            'line-color': '#FFD700',
            'target-arrow-color': '#FFD700',
            'source-arrow-color': '#FFD700',
            'width': 5
        }).update();

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        document.getElementById('layoutSelect').addEventListener('change', changeLayout);

        // ì´ˆê¸° í†µê³„ ì—…ë°ì´íŠ¸
        updateStats();

        // ì´ˆê¸° ë ˆì´ì•„ì›ƒ ì ìš©
        cy.ready(function() {
            cy.layout({ name: 'cose', fit: true, padding: 30 }).run();
        });
    </script>
</body>
</html>